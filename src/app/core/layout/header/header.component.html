<div class="flex flex-row items-center justify-between w-full h-full">
  <div class="flex justify-center items-center">
    <button
      mat-icon-button
      type="button"
      aria-label="Open menu"
      class="menu-btn"
      (click)="openMenu()"
    >
      <mat-icon [style.color]="'#fff'">menu</mat-icon>
    </button>

    <a routerLink="/" class="flex items-center">
      <img ngSrc="assets/logo.svg" alt="Logo" class="h-8 w-8" height="48" width="48">
      <span class="ml-2 font-bold tracking-tight hidden sm:block">My Water App</span>
    </a>

    <nav class="hidden md:flex items-center gap-4 ml-6">
      <a routerLink="/shop" routerLinkActive="text-blue-400"
         class="text-sm font-bold uppercase tracking-widest hover:text-blue-200 transition-colors">Shop</a>
      <a routerLink="/orders" routerLinkActive="text-blue-400"
         class="text-sm font-bold uppercase tracking-widest hover:text-blue-200 transition-colors">Orders</a>
    </nav>
  </div>

  <div class="flex items-center gap-1 sm:gap-4">
    <!-- Cart Icon with dynamic badge -->
    <button mat-icon-button class="relative" aria-label="View cart" (click)="openMenu()">
      <mat-icon [style.color]="'#fff'">shopping_cart</mat-icon>
      @if (cartCount() > 0) {
        <span
          class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold h-5 w-5 rounded-full flex items-center justify-center border-2 border-slate-800">
          {{ cartCount() }}
        </span>
      }
    </button>

    <!-- Desktop Auth (Hidden on mobile) -->
    <div class="hidden sm:flex items-center gap-2">
      @if (!authStore.isAuthenticated()) {
        <div class="flex flex-col gap-2 sm:flex-row sm:gap-2">
          <button mat-raised-button color="primary" class="w-full sm:w-auto" (click)="openRegister()">
            Register
          </button>
          <button mat-raised-button color="primary" class="w-full sm:w-auto" (click)="openLogin()">
            Login
          </button>
        </div>
      } @else {
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-2">
          <div class="max-w-full sm:max-w-[320px] truncate text-center">
            Welcome, {{ user()?.email }}!
          </div>
          <button mat-raised-button color="primary" class="w-full sm:w-auto" (click)="logout()">
            Logout
          </button>
        </div>
      }
    </div>
  </div>
</div>
